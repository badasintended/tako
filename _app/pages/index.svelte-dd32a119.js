import{S as x,i as E,s as q,e as p,k as b,t as A,c as v,a as g,n as k,g as D,d as _,b as h,X as j,f as I,E as d,h as S,j as T,m as V,o as C,x as M,u as G,v as R,Y as U,I as X,A as Y}from"../chunks/vendor-b1776dd9.js";import{d as z}from"../chunks/database-74ffdce0.js";import{T as B}from"../chunks/Title-ffab03d7.js";import{p as F}from"../chunks/stores-54dbfcc7.js";import{p as H}from"../chunks/source-01fb9fce.js";import{g as J}from"../chunks/navigation-51f4a605.js";import"../chunks/singletons-12a22614.js";function y(c,s,r){const o=c.slice();return o[2]=s[r],o}function w(c){let s,r,o,i,f,l,t=c[2].title+"",e,u,a;return{c(){s=p("a"),r=p("img"),f=b(),l=p("div"),e=A(t),u=b(),this.h()},l(n){s=v(n,"A",{class:!0,href:!0});var m=g(s);r=v(m,"IMG",{class:!0,src:!0,alt:!0}),f=k(m),l=v(m,"DIV",{class:!0});var $=g(l);e=D($,t),$.forEach(_),u=k(m),m.forEach(_),this.h()},h(){h(r,"class","flex-shrink-0 w-40 h-60 object-cover rounded-md transition-transform duration-300 ease-in-out group-hover:scale-105"),j(r.src,o=c[2].cover)||h(r,"src",o),h(r,"alt",i=c[2].title),h(l,"class","text-sm title svelte-1j18wfb"),h(s,"class","flex flex-col w-40 h-72 m-2 group"),h(s,"href",a="/"+c[2].sourceId+"/"+c[2].mangaId)},m(n,m){I(n,s,m),d(s,r),d(s,f),d(s,l),d(l,e),d(s,u)},p(n,m){m&1&&!j(r.src,o=n[2].cover)&&h(r,"src",o),m&1&&i!==(i=n[2].title)&&h(r,"alt",i),m&1&&t!==(t=n[2].title+"")&&S(e,t),m&1&&a!==(a="/"+n[2].sourceId+"/"+n[2].mangaId)&&h(s,"href",a)},d(n){n&&_(s)}}}function K(c){let s,r,o,i,f;s=new B({props:{title:"library"}});let l=c[0],t=[];for(let e=0;e<l.length;e+=1)t[e]=w(y(c,l,e));return{c(){T(s.$$.fragment),r=b(),o=p("div"),i=p("div");for(let e=0;e<t.length;e+=1)t[e].c();this.h()},l(e){V(s.$$.fragment,e),r=k(e),o=v(e,"DIV",{class:!0});var u=g(o);i=v(u,"DIV",{class:!0});var a=g(i);for(let n=0;n<t.length;n+=1)t[n].l(a);a.forEach(_),u.forEach(_),this.h()},h(){h(i,"class","flex flex-wrap justify-center"),h(o,"class","mb-4")},m(e,u){C(s,e,u),I(e,r,u),I(e,o,u),d(o,i);for(let a=0;a<t.length;a+=1)t[a].m(i,null);f=!0},p(e,[u]){if(u&1){l=e[0];let a;for(a=0;a<l.length;a+=1){const n=y(e,l,a);t[a]?t[a].p(n,u):(t[a]=w(n),t[a].c(),t[a].m(i,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},i(e){f||(M(s.$$.fragment,e),f=!0)},o(e){G(s.$$.fragment,e),f=!1},d(e){R(s,e),e&&_(r),e&&_(o),U(t,e)}}}function L(c,s,r){let o;X(c,F,f=>r(1,o=f));let i=[];return Y(()=>{const f=o.query.get("q");f&&H(f).then(l=>{var t;return J(`/${l.sourceId}/${l.mangaId}/${(t=l.chapterId)!==null&&t!==void 0?t:""}`,{replaceState:!0})}),z.libraries.toArray().then(l=>r(0,i=l.sort((t,e)=>t.title.localeCompare(e.title))))}),[i]}class te extends x{constructor(s){super();E(this,s,L,K,q,{})}}export{te as default};
