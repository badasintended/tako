import{S as x,i as E,s as q,e as d,k as b,t as D,c as v,a as g,n as k,g as A,d as _,b as h,Y as I,f as $,D as p,h as S,j as T,m as V,o as C,x as M,u as G,v as R,Z as U,E as Y,A as Z}from"../chunks/vendor-7ce006f1.js";import{d as z}from"../chunks/database-62637bf5.js";import{T as B}from"../chunks/Title-6757031f.js";import{p as F}from"../chunks/stores-a5b13367.js";import{p as H}from"../chunks/source-71a1110c.js";import{g as J}from"../chunks/navigation-51f4a605.js";import"../chunks/singletons-12a22614.js";function y(c,s,r){const o=c.slice();return o[2]=s[r],o}function w(c){let s,r,o,i,u,l,t=c[2].title+"",e,f,a;return{c(){s=d("a"),r=d("img"),u=b(),l=d("div"),e=D(t),f=b(),this.h()},l(n){s=v(n,"A",{class:!0,href:!0});var m=g(s);r=v(m,"IMG",{class:!0,src:!0,alt:!0}),u=k(m),l=v(m,"DIV",{class:!0});var j=g(l);e=A(j,t),j.forEach(_),f=k(m),m.forEach(_),this.h()},h(){h(r,"class","flex-shrink-0 w-40 h-60 object-cover rounded-md transition-transform duration-300 ease-in-out group-hover:scale-105"),I(r.src,o=c[2].cover)||h(r,"src",o),h(r,"alt",i=c[2].title),h(l,"class","text-sm title svelte-1j18wfb"),h(s,"class","flex flex-col w-40 h-72 m-2 group"),h(s,"href",a="/"+c[2].sourceId+"/"+c[2].mangaId)},m(n,m){$(n,s,m),p(s,r),p(s,u),p(s,l),p(l,e),p(s,f)},p(n,m){m&1&&!I(r.src,o=n[2].cover)&&h(r,"src",o),m&1&&i!==(i=n[2].title)&&h(r,"alt",i),m&1&&t!==(t=n[2].title+"")&&S(e,t),m&1&&a!==(a="/"+n[2].sourceId+"/"+n[2].mangaId)&&h(s,"href",a)},d(n){n&&_(s)}}}function K(c){let s,r,o,i,u;s=new B({props:{title:"library"}});let l=c[0],t=[];for(let e=0;e<l.length;e+=1)t[e]=w(y(c,l,e));return{c(){T(s.$$.fragment),r=b(),o=d("div"),i=d("div");for(let e=0;e<t.length;e+=1)t[e].c();this.h()},l(e){V(s.$$.fragment,e),r=k(e),o=v(e,"DIV",{class:!0});var f=g(o);i=v(f,"DIV",{class:!0});var a=g(i);for(let n=0;n<t.length;n+=1)t[n].l(a);a.forEach(_),f.forEach(_),this.h()},h(){h(i,"class","flex flex-wrap justify-center"),h(o,"class","mb-4")},m(e,f){C(s,e,f),$(e,r,f),$(e,o,f),p(o,i);for(let a=0;a<t.length;a+=1)t[a].m(i,null);u=!0},p(e,[f]){if(f&1){l=e[0];let a;for(a=0;a<l.length;a+=1){const n=y(e,l,a);t[a]?t[a].p(n,f):(t[a]=w(n),t[a].c(),t[a].m(i,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},i(e){u||(M(s.$$.fragment,e),u=!0)},o(e){G(s.$$.fragment,e),u=!1},d(e){R(s,e),e&&_(r),e&&_(o),U(t,e)}}}function L(c,s,r){let o;Y(c,F,u=>r(1,o=u));let i=[];return Z(()=>{const u=o.query.get("q");u&&H(u).then(l=>{var t;return J(`/${l.sourceId}/${l.mangaId}/${(t=l.chapterId)!==null&&t!==void 0?t:""}`,{replaceState:!0})}),z.libraries.toArray().then(l=>r(0,i=l.sort((t,e)=>t.title.localeCompare(e.title))))}),[i]}class te extends x{constructor(s){super();E(this,s,L,K,q,{})}}export{te as default};
