import{S as he,i as ge,s as ue,R as Ie,e as j,t as K,k as A,c as S,a as B,g as Y,d,n as M,b as I,f as V,D as g,h as Q,N as Ee,O as Ce,P as Ve,x as u,u as _,F as ce,a0 as Xe,j as L,m as N,o as U,J as ve,a1 as ye,a2 as ke,a3 as be,v as F,l as $e,w as ee,E as Te,A as xe,r as te,T as Be,a4 as Ae,a5 as Me,Z as et,Y as Le,M as tt,a6 as lt,a7 as rt,a8 as nt,a9 as Ne,aa as Ue}from"../../../chunks/vendor-7ce006f1.js";import{p as st}from"../../../chunks/stores-a5b13367.js";import{d as oe,c as at}from"../../../chunks/database-62637bf5.js";import{E as ft}from"../../../chunks/Error-524db06c.js";import{a as je,c as Fe}from"../../../chunks/stores-e778dee3.js";import{T as it}from"../../../chunks/Title-6757031f.js";import{g as ot}from"../../../chunks/source-71a1110c.js";import{B as Ge,L as ut}from"../../../chunks/LinkButton-980a7a1f.js";function ct(s){let t,l,e,r,a,n;const i=s[2].default,f=Ie(i,s,s[1],null);return{c(){t=j("div"),l=j("div"),e=K(s[0]),r=A(),a=j("div"),f&&f.c(),this.h()},l(o){t=S(o,"DIV",{class:!0});var m=B(t);l=S(m,"DIV",{class:!0});var c=B(l);e=Y(c,s[0]),c.forEach(d),r=M(m),a=S(m,"DIV",{class:!0});var v=B(a);f&&f.l(v),v.forEach(d),m.forEach(d),this.h()},h(){I(l,"class","text-xs font-bold text-gray-500 leading-none"),I(a,"class","dark:text-one-w"),I(t,"class","flex flex-col p-2")},m(o,m){V(o,t,m),g(t,l),g(l,e),g(t,r),g(t,a),f&&f.m(a,null),n=!0},p(o,[m]){(!n||m&1)&&Q(e,o[0]),f&&f.p&&(!n||m&2)&&Ee(f,i,o,o[1],n?Ve(i,o[1],m,null):Ce(o[1]),null)},i(o){n||(u(f,o),n=!0)},o(o){_(f,o),n=!1},d(o){o&&d(t),f&&f.d(o)}}}function $t(s,t,l){let{$$slots:e={},$$scope:r}=t,{key:a}=t;return s.$$set=n=>{"key"in n&&l(0,a=n.key),"$$scope"in n&&l(1,r=n.$$scope)},[a,r,e]}class de extends he{constructor(t){super();ge(this,t,$t,ct,ue,{key:0})}}function dt(s){let t,l;const e=s[1].default,r=Ie(e,s,s[0],null);return{c(){t=j("div"),r&&r.c(),this.h()},l(a){t=S(a,"DIV",{class:!0});var n=B(t);r&&r.l(n),n.forEach(d),this.h()},h(){I(t,"class","text-xs font-bold leading-none text-gray-500 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-400")},m(a,n){V(a,t,n),r&&r.m(t,null),l=!0},p(a,[n]){r&&r.p&&(!l||n&1)&&Ee(r,e,a,a[0],l?Ve(e,a[0],n,null):Ce(a[0]),null)},i(a){l||(u(r,a),l=!0)},o(a){_(r,a),l=!1},d(a){a&&d(t),r&&r.d(a)}}}function _t(s,t,l){let{$$slots:e={},$$scope:r}=t;return s.$$set=a=>{"$$scope"in a&&l(0,r=a.$$scope)},[r,e]}class He extends he{constructor(t){super();ge(this,t,_t,dt,ue,{})}}function mt(s){let t,l,e,r,a,n,i,f,o,m,c,v,h;return i=new ce({props:{icon:Xe,size:"3x",spin:!0}}),{c(){t=j("div"),l=j("div"),e=A(),r=j("div"),a=j("div"),n=A(),L(i.$$.fragment),f=A(),o=j("div"),m=A(),c=j("div"),this.h()},l(D){t=S(D,"DIV",{class:!0});var C=B(t);l=S(C,"DIV",{class:!0}),B(l).forEach(d),e=M(C),r=S(C,"DIV",{class:!0});var T=B(r);a=S(T,"DIV",{class:!0}),B(a).forEach(d),n=M(T),N(i.$$.fragment,T),f=M(T),o=S(T,"DIV",{class:!0}),B(o).forEach(d),T.forEach(d),m=M(C),c=S(C,"DIV",{class:!0}),B(c).forEach(d),C.forEach(d),this.h()},h(){I(l,"class","flex-grow"),I(a,"class","flex-grow"),I(o,"class","flex-grow"),I(r,"class","flex flex-col"),I(c,"class","flex-grow"),I(t,"class","absolute z-40 w-full h-screen top-0 left-0 bg-white dark:bg-one-b flex text-gray-500 dark:text-one-w")},m(D,C){V(D,t,C),g(t,l),g(t,e),g(t,r),g(r,a),g(r,n),U(i,r,null),g(r,f),g(r,o),g(t,m),g(t,c),h=!0},p:ve,i(D){h||(u(i.$$.fragment,D),ye(()=>{v||(v=ke(t,be,{duration:500},!0)),v.run(1)}),h=!0)},o(D){_(i.$$.fragment,D),v||(v=ke(t,be,{duration:500},!1)),v.run(0),h=!1},d(D){D&&d(t),F(i),D&&v&&v.end()}}}class pt extends he{constructor(t){super();ge(this,t,null,mt,ue,{})}}function ht(s){let t;const l=s[2].default,e=Ie(l,s,s[4],null);return{c(){e&&e.c()},l(r){e&&e.l(r)},m(r,a){e&&e.m(r,a),t=!0},p(r,a){e&&e.p&&(!t||a&16)&&Ee(e,l,r,r[4],t?Ve(l,r[4],a,null):Ce(r[4]),null)},i(r){t||(u(e,r),t=!0)},o(r){_(e,r),t=!1},d(r){e&&e.d(r)}}}function gt(s){var a;let t,l,e,r;return l=new Ge({props:{onClick:(a=s[1])!=null?a:s[3],$$slots:{default:[ht]},$$scope:{ctx:s}}}),{c(){t=j("div"),L(l.$$.fragment),this.h()},l(n){t=S(n,"DIV",{class:!0});var i=B(t);N(l.$$.fragment,i),i.forEach(d),this.h()},h(){I(t,"class",e=s[0]?"":"text-gray-300 dark:text-gray-600")},m(n,i){V(n,t,i),U(l,t,null),r=!0},p(n,[i]){var o;const f={};i&3&&(f.onClick=(o=n[1])!=null?o:n[3]),i&16&&(f.$$scope={dirty:i,ctx:n}),l.$set(f),(!r||i&1&&e!==(e=n[0]?"":"text-gray-300 dark:text-gray-600"))&&I(t,"class",e)},i(n){r||(u(l.$$.fragment,n),r=!0)},o(n){_(l.$$.fragment,n),r=!1},d(n){n&&d(t),F(l)}}}function vt(s,t,l){let{$$slots:e={},$$scope:r}=t,{state:a}=t,{onClick:n}=t;const i=()=>l(0,a=!a);return s.$$set=f=>{"state"in f&&l(0,a=f.state),"onClick"in f&&l(1,n=f.onClick),"$$scope"in f&&l(4,r=f.$$scope)},[a,n,e,i,r]}class qe extends he{constructor(t){super();ge(this,t,vt,gt,ue,{state:0,onClick:1})}}function ze(s,t,l){const e=s.slice();return e[18]=t[l],e}function kt(s){let t,l,e,r,a,n,i,f,o,m,c,v,h,D,C,T,y,w,E,Z,p,k,R=s[0].chapters.length+"",ne,_e,X,fe,le,me,W,x,re,we,Se;i=new de({props:{key:"Title",$$slots:{default:[wt]},$$scope:{ctx:s}}});let G=s[0].altTitles&&Oe(s),H=s[0].authors&&Pe(s),q=s[0].artists&&Re(s),z=s[0].tags&&Je(s),O=s[0].description&&Ke(s);C=new ut({props:{href:s[0].url,newTab:!0,$$slots:{default:[Tt]},$$scope:{ctx:s}}}),y=new Ge({props:{onClick:s[8],$$slots:{default:[jt]},$$scope:{ctx:s}}}),E=new qe({props:{state:s[1]!==-1,onClick:s[7],$$slots:{default:[St]},$$scope:{ctx:s}}}),W=new ce({props:{icon:s[5]===-1?Ae:Me,scale:1.1}});let P=s[3]&&Ye(s);return{c(){t=j("div"),l=j("div"),e=j("img"),a=A(),n=j("div"),L(i.$$.fragment),f=A(),G&&G.c(),o=A(),H&&H.c(),m=A(),q&&q.c(),c=A(),z&&z.c(),v=A(),O&&O.c(),h=A(),D=j("div"),L(C.$$.fragment),T=A(),L(y.$$.fragment),w=A(),L(E.$$.fragment),Z=A(),p=j("div"),k=j("div"),ne=K(R),_e=K(` chapters
      `),X=j("div"),fe=A(),le=j("button"),me=K(`Sort
        `),L(W.$$.fragment),x=A(),P&&P.c(),this.h()},l($){t=S($,"DIV",{class:!0});var b=B(t);l=S(b,"DIV",{class:!0});var pe=B(l);e=S(pe,"IMG",{src:!0,alt:!0,class:!0}),pe.forEach(d),a=M(b),n=S(b,"DIV",{class:!0});var J=B(n);N(i.$$.fragment,J),f=M(J),G&&G.l(J),o=M(J),H&&H.l(J),m=M(J),q&&q.l(J),c=M(J),z&&z.l(J),v=M(J),O&&O.l(J),h=M(J),D=S(J,"DIV",{class:!0});var se=B(D);N(C.$$.fragment,se),T=M(se),N(y.$$.fragment,se),w=M(se),N(E.$$.fragment,se),se.forEach(d),J.forEach(d),b.forEach(d),Z=M($),p=S($,"DIV",{class:!0});var ie=B(p);k=S(ie,"DIV",{class:!0});var ae=B(k);ne=Y(ae,R),_e=Y(ae,` chapters
      `),X=S(ae,"DIV",{class:!0}),B(X).forEach(d),fe=M(ae),le=S(ae,"BUTTON",{class:!0});var De=B(le);me=Y(De,`Sort
        `),N(W.$$.fragment,De),De.forEach(d),ae.forEach(d),x=M(ie),P&&P.l(ie),ie.forEach(d),this.h()},h(){Le(e.src,r=s[0].cover)||I(e,"src",r),I(e,"alt",""),I(e,"class","w-60 h-80 object-contain mx-auto"),I(l,"class","min-w-60"),I(D,"class","flex flex-row-reverse p-2"),I(n,"class","flex-grow flex flex-col divide-y divide-gray-200 dark:divide-gray-700 m-2"),I(t,"class","flex flex-col sm:flex-row w-full border-b border-gray-200 dark:border-gray-700"),I(X,"class","flex-grow"),I(le,"class","flex items-center gap-x-1 h-full transition-colors duration-100 ease-in-out p-2 m-auto hover:text-black dark:hover:text-white"),I(k,"class","px-2 flex items-center"),I(p,"class","w-full max-w-3xl py-4 mx-auto divide-y divide-gray-200 dark:divide-gray-700")},m($,b){V($,t,b),g(t,l),g(l,e),g(t,a),g(t,n),U(i,n,null),g(n,f),G&&G.m(n,null),g(n,o),H&&H.m(n,null),g(n,m),q&&q.m(n,null),g(n,c),z&&z.m(n,null),g(n,v),O&&O.m(n,null),g(n,h),g(n,D),U(C,D,null),g(D,T),U(y,D,null),g(D,w),U(E,D,null),V($,Z,b),V($,p,b),g(p,k),g(k,ne),g(k,_e),g(k,X),g(k,fe),g(k,le),g(le,me),U(W,le,null),g(p,x),P&&P.m(p,null),re=!0,we||(Se=tt(le,"click",s[9]),we=!0)},p($,b){(!re||b&1&&!Le(e.src,r=$[0].cover))&&I(e,"src",r);const pe={};b&2097153&&(pe.$$scope={dirty:b,ctx:$}),i.$set(pe),$[0].altTitles?G?(G.p($,b),b&1&&u(G,1)):(G=Oe($),G.c(),u(G,1),G.m(n,o)):G&&(te(),_(G,1,1,()=>{G=null}),ee()),$[0].authors?H?(H.p($,b),b&1&&u(H,1)):(H=Pe($),H.c(),u(H,1),H.m(n,m)):H&&(te(),_(H,1,1,()=>{H=null}),ee()),$[0].artists?q?(q.p($,b),b&1&&u(q,1)):(q=Re($),q.c(),u(q,1),q.m(n,c)):q&&(te(),_(q,1,1,()=>{q=null}),ee()),$[0].tags?z?(z.p($,b),b&1&&u(z,1)):(z=Je($),z.c(),u(z,1),z.m(n,v)):z&&(te(),_(z,1,1,()=>{z=null}),ee()),$[0].description?O?(O.p($,b),b&1&&u(O,1)):(O=Ke($),O.c(),u(O,1),O.m(n,h)):O&&(te(),_(O,1,1,()=>{O=null}),ee());const J={};b&1&&(J.href=$[0].url),b&2097152&&(J.$$scope={dirty:b,ctx:$}),C.$set(J);const se={};b&2097152&&(se.$$scope={dirty:b,ctx:$}),y.$set(se);const ie={};b&2&&(ie.state=$[1]!==-1),b&2097154&&(ie.$$scope={dirty:b,ctx:$}),E.$set(ie),(!re||b&1)&&R!==(R=$[0].chapters.length+"")&&Q(ne,R);const ae={};b&32&&(ae.icon=$[5]===-1?Ae:Me),W.$set(ae),$[3]?P?(P.p($,b),b&8&&u(P,1)):(P=Ye($),P.c(),u(P,1),P.m(p,null)):P&&(te(),_(P,1,1,()=>{P=null}),ee())},i($){re||(u(i.$$.fragment,$),u(G),u(H),u(q),u(z),u(O),u(C.$$.fragment,$),u(y.$$.fragment,$),u(E.$$.fragment,$),u(W.$$.fragment,$),u(P),re=!0)},o($){_(i.$$.fragment,$),_(G),_(H),_(q),_(z),_(O),_(C.$$.fragment,$),_(y.$$.fragment,$),_(E.$$.fragment,$),_(W.$$.fragment,$),_(P),re=!1},d($){$&&d(t),F(i),G&&G.d(),H&&H.d(),q&&q.d(),z&&z.d(),O&&O.d(),F(C),F(y),F(E),$&&d(Z),$&&d(p),F(W),P&&P.d(),we=!1,Se()}}}function bt(s){let t,l,e,r;const a=[Ut,Nt],n=[];function i(f,o){return f[2]?0:1}return t=i(s),l=n[t]=a[t](s),{c(){l.c(),e=$e()},l(f){l.l(f),e=$e()},m(f,o){n[t].m(f,o),V(f,e,o),r=!0},p(f,o){let m=t;t=i(f),t!==m&&(te(),_(n[m],1,1,()=>{n[m]=null}),ee(),l=n[t],l||(l=n[t]=a[t](f),l.c()),u(l,1),l.m(e.parentNode,e))},i(f){r||(u(l),r=!0)},o(f){_(l),r=!1},d(f){n[t].d(f),f&&d(e)}}}function wt(s){let t=s[0].title+"",l;return{c(){l=K(t)},l(e){l=Y(e,t)},m(e,r){V(e,l,r)},p(e,r){r&1&&t!==(t=e[0].title+"")&&Q(l,t)},d(e){e&&d(l)}}}function Oe(s){let t,l;return t=new de({props:{key:`Alternate Title${s[0].altTitles.length>1?"s":""}`,$$slots:{default:[Dt]},$$scope:{ctx:s}}}),{c(){L(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},p(e,r){const a={};r&1&&(a.key=`Alternate Title${e[0].altTitles.length>1?"s":""}`),r&2097153&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){l||(u(t.$$.fragment,e),l=!0)},o(e){_(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function Dt(s){let t=s[0].altTitles.join(", ")+"",l;return{c(){l=K(t)},l(e){l=Y(e,t)},m(e,r){V(e,l,r)},p(e,r){r&1&&t!==(t=e[0].altTitles.join(", ")+"")&&Q(l,t)},d(e){e&&d(l)}}}function Pe(s){let t,l;return t=new de({props:{key:`Author${s[0].authors.length>1?"s":""}`,$$slots:{default:[It]},$$scope:{ctx:s}}}),{c(){L(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},p(e,r){const a={};r&1&&(a.key=`Author${e[0].authors.length>1?"s":""}`),r&2097153&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){l||(u(t.$$.fragment,e),l=!0)},o(e){_(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function It(s){let t=s[0].authors.join(", ")+"",l;return{c(){l=K(t)},l(e){l=Y(e,t)},m(e,r){V(e,l,r)},p(e,r){r&1&&t!==(t=e[0].authors.join(", ")+"")&&Q(l,t)},d(e){e&&d(l)}}}function Re(s){let t,l;return t=new de({props:{key:`Artist${s[0].artists.length>1?"s":""}`,$$slots:{default:[Et]},$$scope:{ctx:s}}}),{c(){L(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},p(e,r){const a={};r&1&&(a.key=`Artist${e[0].artists.length>1?"s":""}`),r&2097153&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){l||(u(t.$$.fragment,e),l=!0)},o(e){_(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function Et(s){let t=s[0].artists.join(", ")+"",l;return{c(){l=K(t)},l(e){l=Y(e,t)},m(e,r){V(e,l,r)},p(e,r){r&1&&t!==(t=e[0].artists.join(", ")+"")&&Q(l,t)},d(e){e&&d(l)}}}function Je(s){let t,l;return t=new de({props:{key:`Genre${s[0].tags.length>1?"s":""}`,$$slots:{default:[Ct]},$$scope:{ctx:s}}}),{c(){L(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},p(e,r){const a={};r&1&&(a.key=`Genre${e[0].tags.length>1?"s":""}`),r&2097153&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){l||(u(t.$$.fragment,e),l=!0)},o(e){_(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function Ct(s){let t=s[0].tags.join(", ")+"",l;return{c(){l=K(t)},l(e){l=Y(e,t)},m(e,r){V(e,l,r)},p(e,r){r&1&&t!==(t=e[0].tags.join(", ")+"")&&Q(l,t)},d(e){e&&d(l)}}}function Ke(s){let t,l;return t=new de({props:{key:"Description",$$slots:{default:[Vt]},$$scope:{ctx:s}}}),{c(){L(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},p(e,r){const a={};r&2097153&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){l||(u(t.$$.fragment,e),l=!0)},o(e){_(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function Vt(s){let t,l=s[0].description+"";return{c(){t=j("div"),this.h()},l(e){t=S(e,"DIV",{class:!0});var r=B(t);r.forEach(d),this.h()},h(){I(t,"class","manga-desc whitespace-pre-line svelte-17o6ghw")},m(e,r){V(e,t,r),t.innerHTML=l},p(e,r){r&1&&l!==(l=e[0].description+"")&&(t.innerHTML=l)},d(e){e&&d(t)}}}function Tt(s){let t,l;return t=new ce({props:{icon:lt,scale:1.25}}),{c(){L(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},p:ve,i(e){l||(u(t.$$.fragment,e),l=!0)},o(e){_(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function jt(s){let t,l;return t=new ce({props:{icon:rt,scale:1.25}}),{c(){L(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},p:ve,i(e){l||(u(t.$$.fragment,e),l=!0)},o(e){_(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function St(s){let t,l;return t=new ce({props:{icon:nt,scale:1.25,class:s[1]!==-1?"text-red-400":""}}),{c(){L(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},p(e,r){const a={};r&2&&(a.class=e[1]!==-1?"text-red-400":""),t.$set(a)},i(e){l||(u(t.$$.fragment,e),l=!0)},o(e){_(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function Ye(s){let t,l,e=s[0].chapters,r=[];for(let n=0;n<e.length;n+=1)r[n]=We(ze(s,e,n));const a=n=>_(r[n],1,1,()=>{r[n]=null});return{c(){for(let n=0;n<r.length;n+=1)r[n].c();t=$e()},l(n){for(let i=0;i<r.length;i+=1)r[i].l(n);t=$e()},m(n,i){for(let f=0;f<r.length;f+=1)r[f].m(n,i);V(n,t,i),l=!0},p(n,i){if(i&1105){e=n[0].chapters;let f;for(f=0;f<e.length;f+=1){const o=ze(n,e,f);r[f]?(r[f].p(o,i),u(r[f],1)):(r[f]=We(o),r[f].c(),u(r[f],1),r[f].m(t.parentNode,t))}for(te(),f=e.length;f<r.length;f+=1)a(f);ee()}},i(n){if(!l){for(let i=0;i<e.length;i+=1)u(r[i]);l=!0}},o(n){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)_(r[i]);l=!1},d(n){et(r,n),n&&d(t)}}}function Ze(s){let t,l;return t=new He({props:{$$slots:{default:[yt]},$$scope:{ctx:s}}}),{c(){L(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},p(e,r){const a={};r&2097153&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){l||(u(t.$$.fragment,e),l=!0)},o(e){_(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function yt(s){let t=(s[18].volume!==void 0?`Volume ${s[18].volume} - `:"")+"",l,e,r=s[18].number+"",a;return{c(){l=K(t),e=K(`
                Chapter `),a=K(r)},l(n){l=Y(n,t),e=Y(n,`
                Chapter `),a=Y(n,r)},m(n,i){V(n,l,i),V(n,e,i),V(n,a,i)},p(n,i){i&1&&t!==(t=(n[18].volume!==void 0?`Volume ${n[18].volume} - `:"")+"")&&Q(l,t),i&1&&r!==(r=n[18].number+"")&&Q(a,r)},d(n){n&&d(l),n&&d(e),n&&d(a)}}}function Bt(s){let t=(s[18].volume!==void 0?`Volume ${s[18].volume} - `:"")+"",l,e,r=s[18].number+"",a;return{c(){l=K(t),e=K(`
                Chapter `),a=K(r)},l(n){l=Y(n,t),e=Y(n,`
                Chapter `),a=Y(n,r)},m(n,i){V(n,l,i),V(n,e,i),V(n,a,i)},p(n,i){i&1&&t!==(t=(n[18].volume!==void 0?`Volume ${n[18].volume} - `:"")+"")&&Q(l,t),i&1&&r!==(r=n[18].number+"")&&Q(a,r)},d(n){n&&d(l),n&&d(e),n&&d(a)}}}function At(s){let t=s[18].title+"",l;return{c(){l=K(t)},l(e){l=Y(e,t)},m(e,r){V(e,l,r)},p(e,r){r&1&&t!==(t=e[18].title+"")&&Q(l,t)},d(e){e&&d(l)}}}function Mt(s){var e,r,a;let t=((a=(r=(e=s[18].scanlators)==null?void 0:e.join(", "))==null?void 0:r.concat(" - "))!=null?a:"")+new Date(s[18].uploadDate*1e3).toLocaleDateString()+"",l;return{c(){l=K(t)},l(n){l=Y(n,t)},m(n,i){V(n,l,i)},p(n,i){var f,o,m;i&1&&t!==(t=((m=(o=(f=n[18].scanlators)==null?void 0:f.join(", "))==null?void 0:o.concat(" - "))!=null?m:"")+new Date(n[18].uploadDate*1e3).toLocaleDateString()+"")&&Q(l,t)},d(n){n&&d(l)}}}function Lt(s){let t,l;return t=new ce({props:{fw:!0,icon:s[4].has(s[18].id)?Ne:Ue}}),{c(){L(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},p(e,r){const a={};r&17&&(a.icon=e[4].has(e[18].id)?Ne:Ue),t.$set(a)},i(e){l||(u(t.$$.fragment,e),l=!0)},o(e){_(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function Qe(s){let t,l;function e(){return s[11](s[18])}return t=new qe({props:{state:s[4].has(s[18].id),onClick:e,$$slots:{default:[Lt]},$$scope:{ctx:s}}}),{c(){L(t.$$.fragment)},l(r){N(t.$$.fragment,r)},m(r,a){U(t,r,a),l=!0},p(r,a){s=r;const n={};a&17&&(n.state=s[4].has(s[18].id)),a&1&&(n.onClick=e),a&2097169&&(n.$$scope={dirty:a,ctx:s}),t.$set(n)},i(r){l||(u(t.$$.fragment,r),l=!0)},o(r){_(t.$$.fragment,r),l=!1},d(r){F(t,r)}}}function We(s){let t,l,e,r,a,n,i,f,o=s[4],m,c,v,h=s[18].title&&Ze(s);function D(w,E){return w[18].title?At:Bt}let C=D(s),T=C(s);n=new He({props:{$$slots:{default:[Mt]},$$scope:{ctx:s}}});let y=Qe(s);return{c(){t=j("div"),l=j("a"),h&&h.c(),e=A(),r=j("div"),T.c(),a=A(),L(n.$$.fragment),f=A(),y.c(),m=A(),this.h()},l(w){t=S(w,"DIV",{class:!0});var E=B(t);l=S(E,"A",{class:!0,href:!0});var Z=B(l);h&&h.l(Z),e=M(Z),r=S(Z,"DIV",{class:!0});var p=B(r);T.l(p),p.forEach(d),a=M(Z),N(n.$$.fragment,Z),Z.forEach(d),f=M(E),y.l(E),m=M(E),E.forEach(d),this.h()},h(){I(r,"class","text-left leading-none py-1"),I(l,"class","flex flex-col group flex-grow hover:text-black dark:hover:text-white"),I(l,"href",i="/"+s[6]+"/"+s[0].id+"/"+s[18].id),I(t,"class","flex w-full p-2 items-center")},m(w,E){V(w,t,E),g(t,l),h&&h.m(l,null),g(l,e),g(l,r),T.m(r,null),g(l,a),U(n,l,null),g(t,f),y.m(t,null),g(t,m),v=!0},p(w,E){w[18].title?h?(h.p(w,E),E&1&&u(h,1)):(h=Ze(w),h.c(),u(h,1),h.m(l,e)):h&&(te(),_(h,1,1,()=>{h=null}),ee()),C===(C=D(w))&&T?T.p(w,E):(T.d(1),T=C(w),T&&(T.c(),T.m(r,null)));const Z={};E&2097153&&(Z.$$scope={dirty:E,ctx:w}),n.$set(Z),(!v||E&1&&i!==(i="/"+w[6]+"/"+w[0].id+"/"+w[18].id))&&I(l,"href",i),E&16&&ue(o,o=w[4])?(te(),_(y,1,1,ve),ee(),y=Qe(w),y.c(),u(y),y.m(t,m)):y.p(w,E)},i(w){v||(u(h),u(n.$$.fragment,w),u(y),ye(()=>{c||(c=ke(t,be,{y:100,duration:200},!0)),c.run(1)}),v=!0)},o(w){_(h),_(n.$$.fragment,w),_(y),c||(c=ke(t,be,{y:100,duration:200},!1)),c.run(0),v=!1},d(w){w&&d(t),h&&h.d(),T.d(),F(n),y.d(w),w&&c&&c.end()}}}function Nt(s){let t,l;return t=new pt({}),{c(){L(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},i(e){l||(u(t.$$.fragment,e),l=!0)},o(e){_(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function Ut(s){let t,l;return t=new ft({props:{message:"Manga not found"}}),{c(){L(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},i(e){l||(u(t.$$.fragment,e),l=!0)},o(e){_(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function Ft(s){var m;let t,l,e,r,a,n;t=new it({props:{title:(m=s[0])==null?void 0:m.title}});const i=[bt,kt],f=[];function o(c,v){return c[0]?1:0}return e=o(s),r=f[e]=i[e](s),{c(){L(t.$$.fragment),l=A(),r.c(),a=$e()},l(c){N(t.$$.fragment,c),l=M(c),r.l(c),a=$e()},m(c,v){U(t,c,v),V(c,l,v),f[e].m(c,v),V(c,a,v),n=!0},p(c,[v]){var C;const h={};v&1&&(h.title=(C=c[0])==null?void 0:C.title),t.$set(h);let D=e;e=o(c),e===D?f[e].p(c,v):(te(),_(f[D],1,1,()=>{f[D]=null}),ee(),r=f[e],r?r.p(c,v):(r=f[e]=i[e](c),r.c()),u(r,1),r.m(a.parentNode,a))},i(c){n||(u(t.$$.fragment,c),u(r),n=!0)},o(c){_(t.$$.fragment,c),_(r),n=!1},d(c){F(t,c),c&&d(l),f[e].d(c),c&&d(a)}}}function Gt(s,t,l){let e,r,a;Te(s,Fe,p=>l(5,e=p)),Te(s,je,p=>l(12,r=p)),Te(s,st,p=>l(13,a=p));var n=this&&this.__awaiter||function(p,k,R,ne){function _e(X){return X instanceof R?X:new R(function(fe){fe(X)})}return new(R||(R=Promise))(function(X,fe){function le(x){try{W(ne.next(x))}catch(re){fe(re)}}function me(x){try{W(ne.throw(x))}catch(re){fe(re)}}function W(x){x.done?X(x.value):_e(x.value).then(le,me)}W((ne=ne.apply(p,k||[])).next())})};const{sourceId:i,mangaId:f}=a.params;let o,m=-1,c=!1,v=!0,h=new Set;xe(()=>{D()});function D(){ot(i,f).then(p=>n(this,void 0,void 0,function*(){yield oe.libraries.filter(k=>k.sourceId===i&&k.mangaId===p.id).limit(1).eachPrimaryKey(k=>l(1,m=k)),oe.readChapters.filter(k=>k.sourceId===i&&k.mangaId===f).each(k=>h.add(k.chapterId));for(let k of p.chapters)k.uploadDate||(yield oe.fakeUploadTimes.filter(R=>R.id===p.source+p.id+k.id).first(R=>k.uploadDate=R.date).catch(()=>n(this,void 0,void 0,function*(){k.uploadDate=Date.now()/1e3,yield oe.fakeUploadTimes.add({id:p.source+p.id+k.id,date:k.uploadDate})})));l(0,o=p),Be(je,r=o,r),C()})).catch(()=>l(2,c=!0))}function C(){o.chapters.sort((p,k)=>p.number*e-k.number*e),setTimeout(()=>{l(0,o),l(3,v=!0)},200)}function T(){m!==-1?oe.libraries.delete(m).then(()=>l(1,m=-1)):oe.libraries.add({sourceId:i,mangaId:f,title:o.title,cover:o.cover}).then(p=>l(1,m=p))}function y(){Be(je,r=l(0,o=void 0),r),l(2,c=!1),at.manga.where({source:i,id:f}).delete().then(()=>D())}function w(){l(3,v=!1),Fe.set(e*-1),C()}function E(p){let k;h.has(p.id)?k=oe.readChapters.filter(R=>R.sourceId===i&&R.mangaId===f&&R.chapterId===p.id).delete().then(()=>h.delete(p.id)):k=oe.readChapters.add({sourceId:i,mangaId:f,chapterId:p.id,lastPage:0,totalPage:0}).then(()=>h.add(p.id)),k.then(()=>l(4,h))}return[o,m,c,v,h,e,i,T,y,w,E,p=>E(p)]}class Yt extends he{constructor(t){super();ge(this,t,Gt,Ft,ue,{})}}export{Yt as default};
