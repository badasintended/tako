import{S as _e,i as me,s as ce,D as Ee,e as T,t as F,k as U,c as S,a as C,g as H,d,n as G,b as w,f as V,E as h,h as Q,F as Ve,G as Te,H as Se,x as m,u as v,J as we,a0 as Ye,j as O,m as J,o as K,N as Ce,a1 as je,a2 as pe,a3 as $e,v as P,l as ie,w as Z,I as Ie,A as We,r as x,T as Ze,a4 as Ae,a5 as Be,Y as xe,X as Me,Q as Ne,R as et,a6 as Le,a7 as Ue}from"../../../chunks/vendor-b1776dd9.js";import{p as tt}from"../../../chunks/stores-54dbfcc7.js";import{d as le}from"../../../chunks/database-74ffdce0.js";import{E as lt}from"../../../chunks/Error-bc57df67.js";import{c as he,a as Ge}from"../../../chunks/stores-55cef8f4.js";import{T as rt}from"../../../chunks/Title-ffab03d7.js";import{B as at}from"../../../chunks/Button-9018cc21.js";import{g as st}from"../../../chunks/source-01fb9fce.js";function nt(s){let t,l,e,r,n,a;const i=s[2].default,o=Ee(i,s,s[1],null);return{c(){t=T("div"),l=T("div"),e=F(s[0]),r=U(),n=T("div"),o&&o.c(),this.h()},l(u){t=S(u,"DIV",{class:!0});var p=C(t);l=S(p,"DIV",{class:!0});var c=C(l);e=H(c,s[0]),c.forEach(d),r=G(p),n=S(p,"DIV",{class:!0});var b=C(n);o&&o.l(b),b.forEach(d),p.forEach(d),this.h()},h(){w(l,"class","text-xs font-bold text-gray-500 leading-none"),w(n,"class","dark:text-one-w"),w(t,"class","flex flex-col p-2")},m(u,p){V(u,t,p),h(t,l),h(l,e),h(t,r),h(t,n),o&&o.m(n,null),a=!0},p(u,[p]){(!a||p&1)&&Q(e,u[0]),o&&o.p&&(!a||p&2)&&Ve(o,i,u,u[1],a?Se(i,u[1],p,null):Te(u[1]),null)},i(u){a||(m(o,u),a=!0)},o(u){v(o,u),a=!1},d(u){u&&d(t),o&&o.d(u)}}}function it(s,t,l){let{$$slots:e={},$$scope:r}=t,{key:n}=t;return s.$$set=a=>{"key"in a&&l(0,n=a.key),"$$scope"in a&&l(1,r=a.$$scope)},[n,r,e]}class oe extends _e{constructor(t){super();me(this,t,it,nt,ce,{key:0})}}function ot(s){let t,l;const e=s[1].default,r=Ee(e,s,s[0],null);return{c(){t=T("div"),r&&r.c(),this.h()},l(n){t=S(n,"DIV",{class:!0});var a=C(t);r&&r.l(a),a.forEach(d),this.h()},h(){w(t,"class","text-xs font-bold leading-none text-gray-500 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-400")},m(n,a){V(n,t,a),r&&r.m(t,null),l=!0},p(n,[a]){r&&r.p&&(!l||a&1)&&Ve(r,e,n,n[0],l?Se(e,n[0],a,null):Te(n[0]),null)},i(n){l||(m(r,n),l=!0)},o(n){v(r,n),l=!1},d(n){n&&d(t),r&&r.d(n)}}}function ft(s,t,l){let{$$slots:e={},$$scope:r}=t;return s.$$set=n=>{"$$scope"in n&&l(0,r=n.$$scope)},[r,e]}class Fe extends _e{constructor(t){super();me(this,t,ft,ot,ce,{})}}function ut(s){let t,l,e,r,n,a,i,o,u,p,c,b,g;return i=new we({props:{icon:Ye,size:"3x",spin:!0}}),{c(){t=T("div"),l=T("div"),e=U(),r=T("div"),n=T("div"),a=U(),O(i.$$.fragment),o=U(),u=T("div"),p=U(),c=T("div"),this.h()},l(E){t=S(E,"DIV",{class:!0});var I=C(t);l=S(I,"DIV",{class:!0}),C(l).forEach(d),e=G(I),r=S(I,"DIV",{class:!0});var D=C(r);n=S(D,"DIV",{class:!0}),C(n).forEach(d),a=G(D),J(i.$$.fragment,D),o=G(D),u=S(D,"DIV",{class:!0}),C(u).forEach(d),D.forEach(d),p=G(I),c=S(I,"DIV",{class:!0}),C(c).forEach(d),I.forEach(d),this.h()},h(){w(l,"class","flex-grow"),w(n,"class","flex-grow"),w(u,"class","flex-grow"),w(r,"class","flex flex-col"),w(c,"class","flex-grow"),w(t,"class","absolute z-40 w-full h-screen top-0 left-0 bg-white dark:bg-one-b flex text-gray-500 dark:text-one-w")},m(E,I){V(E,t,I),h(t,l),h(t,e),h(t,r),h(r,n),h(r,a),K(i,r,null),h(r,o),h(r,u),h(t,p),h(t,c),g=!0},p:Ce,i(E){g||(m(i.$$.fragment,E),je(()=>{b||(b=pe(t,$e,{duration:500},!0)),b.run(1)}),g=!0)},o(E){v(i.$$.fragment,E),b||(b=pe(t,$e,{duration:500},!1)),b.run(0),g=!1},d(E){E&&d(t),P(i),E&&b&&b.end()}}}class ct extends _e{constructor(t){super();me(this,t,null,ut,ce,{})}}function He(s,t,l){const e=s.slice();return e[15]=t[l],e}function dt(s){let t,l,e,r,n,a,i,o,u,p,c,b,g,E,I,D=(s[1]===-1?"Add to":"Remove from")+"",R,f,_,k,q,re=s[0].chapters.length+"",ee,te,ae,fe,X,W,Y,ge,se,ve,De;i=new oe({props:{key:"Title",$$slots:{default:[mt]},$$scope:{ctx:s}}});let j=s[0].altTitles&&Re(s),A=s[0].authors&&qe(s),B=s[0].artists&&ze(s),M=s[0].tags&&Oe(s),N=s[0].description&&Je(s);Y=new we({props:{icon:s[5]===-1?Ae:Be,scale:1.1}});let L=s[3]&&Ke(s);return{c(){t=T("div"),l=T("div"),e=T("img"),n=U(),a=T("div"),O(i.$$.fragment),o=U(),j&&j.c(),u=U(),A&&A.c(),p=U(),B&&B.c(),c=U(),M&&M.c(),b=U(),N&&N.c(),g=U(),E=T("div"),I=T("button"),R=F(D),f=F(" Library"),_=U(),k=T("div"),q=T("div"),ee=F(re),te=F(` chapters
      `),ae=T("div"),fe=U(),X=T("button"),W=F(`Sort
        `),O(Y.$$.fragment),ge=U(),L&&L.c(),this.h()},l($){t=S($,"DIV",{class:!0});var y=C(t);l=S(y,"DIV",{class:!0});var ue=C(l);e=S(ue,"IMG",{src:!0,alt:!0,class:!0}),ue.forEach(d),n=G(y),a=S(y,"DIV",{class:!0});var z=C(a);J(i.$$.fragment,z),o=G(z),j&&j.l(z),u=G(z),A&&A.l(z),p=G(z),B&&B.l(z),c=G(z),M&&M.l(z),b=G(z),N&&N.l(z),g=G(z),E=S(z,"DIV",{class:!0});var ye=C(E);I=S(ye,"BUTTON",{class:!0});var be=C(I);R=H(be,D),f=H(be," Library"),be.forEach(d),ye.forEach(d),z.forEach(d),y.forEach(d),_=G($),k=S($,"DIV",{class:!0});var de=C(k);q=S(de,"DIV",{class:!0});var ne=C(q);ee=H(ne,re),te=H(ne,` chapters
      `),ae=S(ne,"DIV",{class:!0}),C(ae).forEach(d),fe=G(ne),X=S(ne,"BUTTON",{class:!0});var ke=C(X);W=H(ke,`Sort
        `),J(Y.$$.fragment,ke),ke.forEach(d),ne.forEach(d),ge=G(de),L&&L.l(de),de.forEach(d),this.h()},h(){Me(e.src,r=s[0].cover)||w(e,"src",r),w(e,"alt",""),w(e,"class","w-60 h-80 object-contain mx-auto"),w(l,"class","min-w-60"),w(I,"class","outline-none border rounded py-2 px-3 transition-colors duration-100 ease-in-out border-gray-200 dark:border-gray-700 hover:border-gray-400 dark:hover:border-gray-500 hover:text-black dark:hover:text-white"),w(E,"class","flex flex-row-reverse p-2"),w(a,"class","flex-grow flex flex-col divide-y divide-gray-200 dark:divide-gray-700 m-2"),w(t,"class","flex flex-col sm:flex-row w-full border-b border-gray-200 dark:border-gray-700"),w(ae,"class","flex-grow"),w(X,"class","flex items-center gap-x-1 h-full transition-colors duration-100 ease-in-out p-2 m-auto hover:text-black dark:hover:text-white"),w(q,"class","px-2 flex items-center"),w(k,"class","w-full max-w-3xl py-4 mx-auto divide-y divide-gray-200 dark:divide-gray-700")},m($,y){V($,t,y),h(t,l),h(l,e),h(t,n),h(t,a),K(i,a,null),h(a,o),j&&j.m(a,null),h(a,u),A&&A.m(a,null),h(a,p),B&&B.m(a,null),h(a,c),M&&M.m(a,null),h(a,b),N&&N.m(a,null),h(a,g),h(a,E),h(E,I),h(I,R),h(I,f),V($,_,y),V($,k,y),h(k,q),h(q,ee),h(q,te),h(q,ae),h(q,fe),h(q,X),h(X,W),K(Y,X,null),h(k,ge),L&&L.m(k,null),se=!0,ve||(De=[Ne(I,"click",s[7]),Ne(X,"click",s[8])],ve=!0)},p($,y){(!se||y&1&&!Me(e.src,r=$[0].cover))&&w(e,"src",r);const ue={};y&262145&&(ue.$$scope={dirty:y,ctx:$}),i.$set(ue),$[0].altTitles?j?(j.p($,y),y&1&&m(j,1)):(j=Re($),j.c(),m(j,1),j.m(a,u)):j&&(x(),v(j,1,1,()=>{j=null}),Z()),$[0].authors?A?(A.p($,y),y&1&&m(A,1)):(A=qe($),A.c(),m(A,1),A.m(a,p)):A&&(x(),v(A,1,1,()=>{A=null}),Z()),$[0].artists?B?(B.p($,y),y&1&&m(B,1)):(B=ze($),B.c(),m(B,1),B.m(a,c)):B&&(x(),v(B,1,1,()=>{B=null}),Z()),$[0].tags?M?(M.p($,y),y&1&&m(M,1)):(M=Oe($),M.c(),m(M,1),M.m(a,b)):M&&(x(),v(M,1,1,()=>{M=null}),Z()),$[0].description?N?(N.p($,y),y&1&&m(N,1)):(N=Je($),N.c(),m(N,1),N.m(a,g)):N&&(x(),v(N,1,1,()=>{N=null}),Z()),(!se||y&2)&&D!==(D=($[1]===-1?"Add to":"Remove from")+"")&&Q(R,D),(!se||y&1)&&re!==(re=$[0].chapters.length+"")&&Q(ee,re);const z={};y&32&&(z.icon=$[5]===-1?Ae:Be),Y.$set(z),$[3]?L?(L.p($,y),y&8&&m(L,1)):(L=Ke($),L.c(),m(L,1),L.m(k,null)):L&&(x(),v(L,1,1,()=>{L=null}),Z())},i($){se||(m(i.$$.fragment,$),m(j),m(A),m(B),m(M),m(N),m(Y.$$.fragment,$),m(L),se=!0)},o($){v(i.$$.fragment,$),v(j),v(A),v(B),v(M),v(N),v(Y.$$.fragment,$),v(L),se=!1},d($){$&&d(t),P(i),j&&j.d(),A&&A.d(),B&&B.d(),M&&M.d(),N&&N.d(),$&&d(_),$&&d(k),P(Y),L&&L.d(),ve=!1,et(De)}}}function _t(s){let t,l,e,r;const n=[Et,yt],a=[];function i(o,u){return o[2]?0:1}return t=i(s),l=a[t]=n[t](s),{c(){l.c(),e=ie()},l(o){l.l(o),e=ie()},m(o,u){a[t].m(o,u),V(o,e,u),r=!0},p(o,u){let p=t;t=i(o),t!==p&&(x(),v(a[p],1,1,()=>{a[p]=null}),Z(),l=a[t],l||(l=a[t]=n[t](o),l.c()),m(l,1),l.m(e.parentNode,e))},i(o){r||(m(l),r=!0)},o(o){v(l),r=!1},d(o){a[t].d(o),o&&d(e)}}}function mt(s){let t=s[0].title+"",l;return{c(){l=F(t)},l(e){l=H(e,t)},m(e,r){V(e,l,r)},p(e,r){r&1&&t!==(t=e[0].title+"")&&Q(l,t)},d(e){e&&d(l)}}}function Re(s){let t,l;return t=new oe({props:{key:`Alternate Title${s[0].altTitles.length>1?"s":""}`,$$slots:{default:[pt]},$$scope:{ctx:s}}}),{c(){O(t.$$.fragment)},l(e){J(t.$$.fragment,e)},m(e,r){K(t,e,r),l=!0},p(e,r){const n={};r&1&&(n.key=`Alternate Title${e[0].altTitles.length>1?"s":""}`),r&262145&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){l||(m(t.$$.fragment,e),l=!0)},o(e){v(t.$$.fragment,e),l=!1},d(e){P(t,e)}}}function pt(s){let t=s[0].altTitles.join(", ")+"",l;return{c(){l=F(t)},l(e){l=H(e,t)},m(e,r){V(e,l,r)},p(e,r){r&1&&t!==(t=e[0].altTitles.join(", ")+"")&&Q(l,t)},d(e){e&&d(l)}}}function qe(s){let t,l;return t=new oe({props:{key:`Author${s[0].authors.length>1?"s":""}`,$$slots:{default:[$t]},$$scope:{ctx:s}}}),{c(){O(t.$$.fragment)},l(e){J(t.$$.fragment,e)},m(e,r){K(t,e,r),l=!0},p(e,r){const n={};r&1&&(n.key=`Author${e[0].authors.length>1?"s":""}`),r&262145&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){l||(m(t.$$.fragment,e),l=!0)},o(e){v(t.$$.fragment,e),l=!1},d(e){P(t,e)}}}function $t(s){let t=s[0].authors.join(", ")+"",l;return{c(){l=F(t)},l(e){l=H(e,t)},m(e,r){V(e,l,r)},p(e,r){r&1&&t!==(t=e[0].authors.join(", ")+"")&&Q(l,t)},d(e){e&&d(l)}}}function ze(s){let t,l;return t=new oe({props:{key:`Artist${s[0].artists.length>1?"s":""}`,$$slots:{default:[ht]},$$scope:{ctx:s}}}),{c(){O(t.$$.fragment)},l(e){J(t.$$.fragment,e)},m(e,r){K(t,e,r),l=!0},p(e,r){const n={};r&1&&(n.key=`Artist${e[0].artists.length>1?"s":""}`),r&262145&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){l||(m(t.$$.fragment,e),l=!0)},o(e){v(t.$$.fragment,e),l=!1},d(e){P(t,e)}}}function ht(s){let t=s[0].artists.join(", ")+"",l;return{c(){l=F(t)},l(e){l=H(e,t)},m(e,r){V(e,l,r)},p(e,r){r&1&&t!==(t=e[0].artists.join(", ")+"")&&Q(l,t)},d(e){e&&d(l)}}}function Oe(s){let t,l;return t=new oe({props:{key:`Genre${s[0].tags.length>1?"s":""}`,$$slots:{default:[gt]},$$scope:{ctx:s}}}),{c(){O(t.$$.fragment)},l(e){J(t.$$.fragment,e)},m(e,r){K(t,e,r),l=!0},p(e,r){const n={};r&1&&(n.key=`Genre${e[0].tags.length>1?"s":""}`),r&262145&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){l||(m(t.$$.fragment,e),l=!0)},o(e){v(t.$$.fragment,e),l=!1},d(e){P(t,e)}}}function gt(s){let t=s[0].tags.join(", ")+"",l;return{c(){l=F(t)},l(e){l=H(e,t)},m(e,r){V(e,l,r)},p(e,r){r&1&&t!==(t=e[0].tags.join(", ")+"")&&Q(l,t)},d(e){e&&d(l)}}}function Je(s){let t,l;return t=new oe({props:{key:"Description",$$slots:{default:[vt]},$$scope:{ctx:s}}}),{c(){O(t.$$.fragment)},l(e){J(t.$$.fragment,e)},m(e,r){K(t,e,r),l=!0},p(e,r){const n={};r&262145&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){l||(m(t.$$.fragment,e),l=!0)},o(e){v(t.$$.fragment,e),l=!1},d(e){P(t,e)}}}function vt(s){let t,l=s[0].description+"";return{c(){t=T("div"),this.h()},l(e){t=S(e,"DIV",{class:!0});var r=C(t);r.forEach(d),this.h()},h(){w(t,"class","manga-desc whitespace-pre-line svelte-17o6ghw")},m(e,r){V(e,t,r),t.innerHTML=l},p(e,r){r&1&&l!==(l=e[0].description+"")&&(t.innerHTML=l)},d(e){e&&d(t)}}}function Ke(s){let t,l,e=s[0].chapters,r=[];for(let a=0;a<e.length;a+=1)r[a]=Xe(He(s,e,a));const n=a=>v(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=ie()},l(a){for(let i=0;i<r.length;i+=1)r[i].l(a);t=ie()},m(a,i){for(let o=0;o<r.length;o+=1)r[o].m(a,i);V(a,t,i),l=!0},p(a,i){if(i&593){e=a[0].chapters;let o;for(o=0;o<e.length;o+=1){const u=He(a,e,o);r[o]?(r[o].p(u,i),m(r[o],1)):(r[o]=Xe(u),r[o].c(),m(r[o],1),r[o].m(t.parentNode,t))}for(x(),o=e.length;o<r.length;o+=1)n(o);Z()}},i(a){if(!l){for(let i=0;i<e.length;i+=1)m(r[i]);l=!0}},o(a){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)v(r[i]);l=!1},d(a){xe(r,a),a&&d(t)}}}function Pe(s){let t,l;return t=new Fe({props:{$$slots:{default:[bt]},$$scope:{ctx:s}}}),{c(){O(t.$$.fragment)},l(e){J(t.$$.fragment,e)},m(e,r){K(t,e,r),l=!0},p(e,r){const n={};r&262145&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){l||(m(t.$$.fragment,e),l=!0)},o(e){v(t.$$.fragment,e),l=!1},d(e){P(t,e)}}}function bt(s){let t=(s[15].volume!==void 0?`Volume ${s[15].volume} - `:"")+"",l,e,r=s[15].number+"",n;return{c(){l=F(t),e=F(`
                Chapter `),n=F(r)},l(a){l=H(a,t),e=H(a,`
                Chapter `),n=H(a,r)},m(a,i){V(a,l,i),V(a,e,i),V(a,n,i)},p(a,i){i&1&&t!==(t=(a[15].volume!==void 0?`Volume ${a[15].volume} - `:"")+"")&&Q(l,t),i&1&&r!==(r=a[15].number+"")&&Q(n,r)},d(a){a&&d(l),a&&d(e),a&&d(n)}}}function kt(s){let t=(s[15].volume!==void 0?`Volume ${s[15].volume} - `:"")+"",l,e,r=s[15].number+"",n;return{c(){l=F(t),e=F(`
                Chapter `),n=F(r)},l(a){l=H(a,t),e=H(a,`
                Chapter `),n=H(a,r)},m(a,i){V(a,l,i),V(a,e,i),V(a,n,i)},p(a,i){i&1&&t!==(t=(a[15].volume!==void 0?`Volume ${a[15].volume} - `:"")+"")&&Q(l,t),i&1&&r!==(r=a[15].number+"")&&Q(n,r)},d(a){a&&d(l),a&&d(e),a&&d(n)}}}function wt(s){let t=s[15].title+"",l;return{c(){l=F(t)},l(e){l=H(e,t)},m(e,r){V(e,l,r)},p(e,r){r&1&&t!==(t=e[15].title+"")&&Q(l,t)},d(e){e&&d(l)}}}function It(s){var e,r,n;let t=((n=(r=(e=s[15].scanlators)==null?void 0:e.join(", "))==null?void 0:r.concat(" - "))!=null?n:"")+new Date(s[15].uploadDate*1e3).toLocaleDateString()+"",l;return{c(){l=F(t)},l(a){l=H(a,t)},m(a,i){V(a,l,i)},p(a,i){var o,u,p;i&1&&t!==(t=((p=(u=(o=a[15].scanlators)==null?void 0:o.join(", "))==null?void 0:u.concat(" - "))!=null?p:"")+new Date(a[15].uploadDate*1e3).toLocaleDateString()+"")&&Q(l,t)},d(a){a&&d(l)}}}function Dt(s){let t,l;return t=new we({props:{icon:s[4].has(s[15].id)?Le:Ue}}),{c(){O(t.$$.fragment)},l(e){J(t.$$.fragment,e)},m(e,r){K(t,e,r),l=!0},p(e,r){const n={};r&17&&(n.icon=e[4].has(e[15].id)?Le:Ue),t.$set(n)},i(e){l||(m(t.$$.fragment,e),l=!0)},o(e){v(t.$$.fragment,e),l=!1},d(e){P(t,e)}}}function Qe(s){let t,l,e,r;function n(){return s[10](s[15])}return l=new at({props:{onclick:n,$$slots:{default:[Dt]},$$scope:{ctx:s}}}),{c(){t=T("div"),O(l.$$.fragment),this.h()},l(a){t=S(a,"DIV",{class:!0});var i=C(t);J(l.$$.fragment,i),i.forEach(d),this.h()},h(){w(t,"class",e=s[4].has(s[15].id)?"":"text-gray-300 dark:text-gray-600")},m(a,i){V(a,t,i),K(l,t,null),r=!0},p(a,i){s=a;const o={};i&1&&(o.onclick=n),i&262161&&(o.$$scope={dirty:i,ctx:s}),l.$set(o),(!r||i&17&&e!==(e=s[4].has(s[15].id)?"":"text-gray-300 dark:text-gray-600"))&&w(t,"class",e)},i(a){r||(m(l.$$.fragment,a),r=!0)},o(a){v(l.$$.fragment,a),r=!1},d(a){a&&d(t),P(l)}}}function Xe(s){let t,l,e,r,n,a,i,o,u=s[4],p,c,b,g=s[15].title&&Pe(s);function E(f,_){return f[15].title?wt:kt}let I=E(s),D=I(s);a=new Fe({props:{$$slots:{default:[It]},$$scope:{ctx:s}}});let R=Qe(s);return{c(){t=T("div"),l=T("a"),g&&g.c(),e=U(),r=T("div"),D.c(),n=U(),O(a.$$.fragment),o=U(),R.c(),p=U(),this.h()},l(f){t=S(f,"DIV",{class:!0});var _=C(t);l=S(_,"A",{class:!0,href:!0});var k=C(l);g&&g.l(k),e=G(k),r=S(k,"DIV",{class:!0});var q=C(r);D.l(q),q.forEach(d),n=G(k),J(a.$$.fragment,k),k.forEach(d),o=G(_),R.l(_),p=G(_),_.forEach(d),this.h()},h(){w(r,"class","text-left leading-none py-1"),w(l,"class","flex flex-col group flex-grow hover:text-black dark:hover:text-white"),w(l,"href",i="/"+s[6]+"/"+s[0].id+"/"+s[15].id),w(t,"class","flex w-full p-2 items-center")},m(f,_){V(f,t,_),h(t,l),g&&g.m(l,null),h(l,e),h(l,r),D.m(r,null),h(l,n),K(a,l,null),h(t,o),R.m(t,null),h(t,p),b=!0},p(f,_){f[15].title?g?(g.p(f,_),_&1&&m(g,1)):(g=Pe(f),g.c(),m(g,1),g.m(l,e)):g&&(x(),v(g,1,1,()=>{g=null}),Z()),I===(I=E(f))&&D?D.p(f,_):(D.d(1),D=I(f),D&&(D.c(),D.m(r,null)));const k={};_&262145&&(k.$$scope={dirty:_,ctx:f}),a.$set(k),(!b||_&1&&i!==(i="/"+f[6]+"/"+f[0].id+"/"+f[15].id))&&w(l,"href",i),_&16&&ce(u,u=f[4])?(x(),v(R,1,1,Ce),Z(),R=Qe(f),R.c(),m(R),R.m(t,p)):R.p(f,_)},i(f){b||(m(g),m(a.$$.fragment,f),m(R),je(()=>{c||(c=pe(t,$e,{y:100,duration:200},!0)),c.run(1)}),b=!0)},o(f){v(g),v(a.$$.fragment,f),v(R),c||(c=pe(t,$e,{y:100,duration:200},!1)),c.run(0),b=!1},d(f){f&&d(t),g&&g.d(),D.d(),P(a),R.d(f),f&&c&&c.end()}}}function yt(s){let t,l;return t=new ct({}),{c(){O(t.$$.fragment)},l(e){J(t.$$.fragment,e)},m(e,r){K(t,e,r),l=!0},i(e){l||(m(t.$$.fragment,e),l=!0)},o(e){v(t.$$.fragment,e),l=!1},d(e){P(t,e)}}}function Et(s){let t,l;return t=new lt({props:{message:"Manga not found"}}),{c(){O(t.$$.fragment)},l(e){J(t.$$.fragment,e)},m(e,r){K(t,e,r),l=!0},i(e){l||(m(t.$$.fragment,e),l=!0)},o(e){v(t.$$.fragment,e),l=!1},d(e){P(t,e)}}}function Vt(s){var p;let t,l,e,r,n,a;t=new rt({props:{title:(p=s[0])==null?void 0:p.title}});const i=[_t,dt],o=[];function u(c,b){return c[0]?1:0}return e=u(s),r=o[e]=i[e](s),{c(){O(t.$$.fragment),l=U(),r.c(),n=ie()},l(c){J(t.$$.fragment,c),l=G(c),r.l(c),n=ie()},m(c,b){K(t,c,b),V(c,l,b),o[e].m(c,b),V(c,n,b),a=!0},p(c,[b]){var I;const g={};b&1&&(g.title=(I=c[0])==null?void 0:I.title),t.$set(g);let E=e;e=u(c),e===E?o[e].p(c,b):(x(),v(o[E],1,1,()=>{o[E]=null}),Z(),r=o[e],r?r.p(c,b):(r=o[e]=i[e](c),r.c()),m(r,1),r.m(n.parentNode,n))},i(c){a||(m(t.$$.fragment,c),m(r),a=!0)},o(c){v(t.$$.fragment,c),v(r),a=!1},d(c){P(t,c),c&&d(l),o[e].d(c),c&&d(n)}}}function Tt(s,t,l){let e,r,n;Ie(s,he,f=>l(5,e=f)),Ie(s,Ge,f=>l(11,r=f)),Ie(s,tt,f=>l(12,n=f));var a=this&&this.__awaiter||function(f,_,k,q){function re(ee){return ee instanceof k?ee:new k(function(te){te(ee)})}return new(k||(k=Promise))(function(ee,te){function ae(W){try{X(q.next(W))}catch(Y){te(Y)}}function fe(W){try{X(q.throw(W))}catch(Y){te(Y)}}function X(W){W.done?ee(W.value):re(W.value).then(ae,fe)}X((q=q.apply(f,_||[])).next())})};const{sourceId:i,mangaId:o}=n.params;let u,p=-1,c=!1,b=!0,g=new Set;We(()=>{he.set(localStorage.getItem("chapterSort")==="-1"?1:-1),he.subscribe(f=>localStorage.setItem("chapterSort",f.toString())),st(i,o).then(f=>a(void 0,void 0,void 0,function*(){yield le.libraries.filter(_=>_.sourceId===i&&_.mangaId===f.id).limit(1).eachPrimaryKey(_=>l(1,p=_)),le.readChapters.filter(_=>_.sourceId===i&&_.mangaId===o).each(_=>g.add(_.chapterId));for(let _ of f.chapters)_.uploadDate||(yield le.fakeUploadTimes.filter(k=>k.id===f.source+f.id+_.id).first(k=>_.uploadDate=k.date).catch(()=>a(void 0,void 0,void 0,function*(){_.uploadDate=Date.now()/1e3,yield le.fakeUploadTimes.add({id:f.source+f.id+_.id,date:_.uploadDate})})));l(0,u=f),Ze(Ge,r=u,r),I()})).catch(()=>l(2,c=!0))});function E(){p!==-1?le.libraries.delete(p).then(()=>l(1,p=-1)):le.libraries.add({sourceId:i,mangaId:o,title:u.title,cover:u.cover}).then(f=>l(1,p=f))}function I(){l(3,b=!1),he.set(e*-1),u.chapters.sort((f,_)=>f.number*e-_.number*e),setTimeout(()=>{l(0,u),l(3,b=!0)},200)}function D(f){let _;g.has(f.id)?_=le.readChapters.filter(k=>k.sourceId===i&&k.mangaId===o&&k.chapterId===f.id).delete().then(()=>g.delete(f.id)):_=le.readChapters.add({sourceId:i,mangaId:o,chapterId:f.id,lastPage:0,totalPage:0}).then(()=>g.add(f.id)),_.then(()=>l(4,g))}return[u,p,c,b,g,e,i,E,I,D,f=>D(f)]}class Ut extends _e{constructor(t){super();me(this,t,Tt,Vt,ce,{})}}export{Ut as default};
